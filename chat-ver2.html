<!DOCTYPE html>

<html><plasmo-csui></plasmo-csui>

<head>
    <title>업계 최초 AI 시스템 - MEGA Chat AI</title>
    <meta http-equiv="content-type" content="text/html; charset=euc-kr">
    <meta http-equiv="content-style-type" content="text/css">
    <meta http-equiv="content-script-type" content="text/javascript">
    <meta http-equiv="imagetoolbar" content="no">
    <meta http-equiv="x-ua-compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="//www.megals.co.kr/favicon.ico" type="image/ico">

    <script type="text/javascript" src="/common/js/jquery-1.11.1.min.js?ver=20250703"></script>
    <script type="text/javascript" src="/common/js/common.js?ver=20250703"></script>
    <script type="text/javascript" src="/ai/common/js/ui.js?ver=20250703"></script>

    <link type="text/css" rel="stylesheet" href="http://design.megals.co.kr/Design/mega_chat/css/style.css">

</head>

<body>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <div class="container">



        <div class="lnb" id="lnb">
            <div class="lnb-header">
                <button class="close-lnb" id="closeLnb" data-role="menu-close" aria-label="메뉴닫기">
                    <svg xmlns="//www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#222">
                        <path d="M400-80 0-480l400-400 71 71-329 329 329 329-71 71Z"></path>
                    </svg>
                </button>
                <div class="lnb-title">
                    <span class="logo">
                        <!--25.07.21-->
                        <img src="//img.megals.co.kr/mega_chat/logo.png" alt="메가로스쿨 AI 디케이">
                    </span>
                </div>
                <button class="m-new-chat" data-role="new-chat" aria-label="새 질문하기"
                    onclick="javascript:clearHistory();">
                    <svg xmlns="//www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#222">
                        <path
                            d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h357l-80 80H200v560h560v-278l80-80v358q0 33-23.5 56.5T760-120H200Zm280-360ZM360-360v-170l367-367q12-12 27-18t30-6q16 0 30.5 6t26.5 18l56 57q11 12 17 26.5t6 29.5q0 15-5.5 29.5T897-728L530-360H360Zm481-424-56-56 56 56ZM440-440h56l232-232-28-28-29-28-231 231v57Zm260-260-29-28 29 28 28 28-28-28Z">
                        </path>
                    </svg>
                </button>
            </div>
            <button class="btn-chat new-chat-btn" onclick="javascript:clearHistory();">
                <svg xmlns="//www.w3.org/2000/svg" viewBox="0 -960 960 960" width="15px" fill="#222">
                    <path
                        d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h357l-80 80H200v560h560v-278l80-80v358q0 33-23.5 56.5T760-120H200Zm280-360ZM360-360v-170l367-367q12-12 27-18t30-6q16 0 30.5 6t26.5 18l56 57q11 12 17 26.5t6 29.5q0 15-5.5 29.5T897-728L530-360H360Zm481-424-56-56 56 56ZM440-440h56l232-232-28-28-29-28-231 231v57Zm260-260-29-28 29 28 28 28-28-28Z">
                    </path>
                </svg>
                새 질문
            </button>


            <div class="chat active">
                <button class="btn-chat">
                    <svg xmlns="//www.w3.org/2000/svg" width="15px" viewBox="0 -960 960 960" fill="#222">
                        <path
                            d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 27-3 53t-10 51q-14-16-32.5-27T794-418q3-15 4.5-30.5T800-480q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93q51 0 97.5-15t85.5-42q12 17 29.5 30t37.5 20q-51 41-114.5 64T480-80Zm290-160q-21 0-35.5-14.5T720-290q0-21 14.5-35.5T770-340q21 0 35.5 14.5T820-290q0 21-14.5 35.5T770-240Zm-158-52L440-464v-216h80v184l148 148-56 56Z">
                        </path>
                    </svg>최근 질문
                </button>

                <div class="chat-history" id="sidebar">

                    <ul class="options">
                        <li class="fix-list"><a href="#">
                                <svg xmlns="//www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                                    fill="#222">
                                    <path
                                        d="m640-480 80 80v80H520v240l-40 40-40-40v-240H240v-80l80-80v-280h-40v-80h400v80h-40v280Zm-286 80h252l-46-46v-314H400v314l-46 46Zm126 0Z">
                                    </path>
                                </svg>
                                고정</a></li>
                        <li class="f_clear"><a href="#">
                                <svg xmlns="//www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                                    fill="#222">
                                    <path
                                        d="M680-840v80h-40v327l-80-80v-247H400v87l-87-87-33-33v-47h400ZM480-40l-40-40v-240H240v-80l80-80v-46L56-792l56-56 736 736-58 56-264-264h-6v240l-40 40ZM354-400h92l-44-44-2-2-46 46Zm126-193Zm-78 149Z">
                                    </path>
                                </svg>
                                고정해제</a></li>
                        <li class="hide-list"> <a href="#">
                                <svg xmlns="//www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                                    fill="#222">
                                    <path
                                        d="m644-428-58-58q9-47-27-88t-93-32l-58-58q17-8 34.5-12t37.5-4q75 0 127.5 52.5T660-500q0 20-4 37.5T644-428Zm128 126-58-56q38-29 67.5-63.5T832-500q-50-101-143.5-160.5T480-720q-29 0-57 4t-55 12l-62-62q41-17 84-25.5t90-8.5q151 0 269 83.5T920-500q-23 59-60.5 109.5T772-302Zm20 246L624-222q-35 11-70.5 16.5T480-200q-151 0-269-83.5T40-500q21-53 53-98.5t73-81.5L56-792l56-56 736 736-56 56ZM222-624q-29 26-53 57t-41 67q50 101 143.5 160.5T480-280q20 0 39-2.5t39-5.5l-36-38q-11 3-21 4.5t-21 1.5q-75 0-127.5-52.5T300-500q0-11 1.5-21t4.5-21l-84-82Zm319 93Zm-151 75Z">
                                    </path>
                                </svg>
                                숨김</a></li>
                        <li class="h_clear"> <a href="#">
                                <svg xmlns="//www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                                    fill="#222">
                                    <path
                                        d="M480-320q75 0 127.5-52.5T660-500q0-75-52.5-127.5T480-680q-75 0-127.5 52.5T300-500q0 75 52.5 127.5T480-320Zm0-72q-45 0-76.5-31.5T372-500q0-45 31.5-76.5T480-608q45 0 76.5 31.5T588-500q0 45-31.5 76.5T480-392Zm0 192q-146 0-266-81.5T40-500q54-137 174-218.5T480-800q146 0 266 81.5T920-500q-54 137-174 218.5T480-200Zm0-300Zm0 220q113 0 207.5-59.5T832-500q-50-101-144.5-160.5T480-720q-113 0-207.5 59.5T128-500q50 101 144.5 160.5T480-280Z">
                                    </path>
                                </svg>
                                숨김해제</a></li>
                        <li class="link-item"><a href="" class="m-btn-close">닫기</a></li>
                    </ul>
                    <div class="dimmed"></div>
                    <div class="chat-item active" data-ssid="8c12a439-94d3-4fc6-8cf4-d7f44f6d2282">
                        <div class="chat-text">"나는 LEET 120점, GPA 90점, 토익 800점이야. 경북대학교에 합격할 수 있을까?"</div><button
                            class="btn-more" aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="f0c901d1-6014-4e63-8b35-5191933456ae">
                        <div class="chat-text">"나는 LEET 120점, GPA 90점, 토익 800점이야. 경북대학교에 합격할 수 있을까?"</div><button
                            class="btn-more" aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="6f3f7a2a-8cf7-4b40-9c66-afed063102e3">
                        <div class="chat-text">"안녕하세요"</div><button class="btn-more" aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="f2c2c3d7-2dc6-4018-a63e-000ffd0a3d71">
                        <div class="chat-text">"안녕하세요"</div><button class="btn-more" aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="6dd64697-6ad0-4bec-a94d-4db102053ef1">
                        <div class="chat-text">"나는 LEET 120점, GPA 90점, 토익 800점이야. 경북대학교에 합격할 수 있을까?"</div><button
                            class="btn-more" aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="a81dbab4-a459-4fd2-b2c6-4a849104e3d5">
                        <div class="chat-text">"나는 LEET 120점, GPA 90점, 토익 800점이야. 경북대학교에 합격할 수 있을까?"</div><button
                            class="btn-more" aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="21ca6bf6-247a-4b04-a21d-f28cc3990c6f">
                        <div class="chat-text">"나는 LEET 120점, GPA 90점, 토익 800점이야. 경북대학교에 합격할 수 있을까?"</div><button
                            class="btn-more" aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="eb92b27d-82ad-4170-9863-8cbc162fbc22">
                        <div class="chat-text">"나는 LEET 120점, GPA 90점, 토익 800점이야. 경북대학교에 합격할 수 있을까?"</div><button
                            class="btn-more" aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="b08f3882-5806-45de-9b65-dd020c308f99">
                        <div class="chat-text">"2025학년도 강원대학교 최종 합격자의 LEET 평균은?"</div><button class="btn-more"
                            aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="58777ba6-8465-49bd-8ca3-dd9fed2f559f">
                        <div class="chat-text">"나는 LEET 120점, GPA 90점, 토익 800점이야. 경북대학교에 합격할 수 있을까?"</div><button
                            class="btn-more" aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="0075d062-805c-480f-a547-1e12239415cd">
                        <div class="chat-text">"나는 LEET 120점, GPA 90점, 토익 800점이야. 경북대학교에 합격할 수 있을까?"</div><button
                            class="btn-more" aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="7cfe70c9-6ac5-4cc8-9af0-7a4a0fa1fbbe">
                        <div class="chat-text">"나는 LEET 120점, GPA 90점, 토익 800점이야. 경북대학교에 합격할 수 있을까?"</div><button
                            class="btn-more" aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="7f316fba-907a-4033-9d1a-535f7fd1cd07">
                        <div class="chat-text">"나는 LEET 120점, GPA 90점, 토익 800점이야. 경북대학교에 합격할 수 있을까?"</div><button
                            class="btn-more" aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="4e893884-a103-4895-a841-3bef9d0e7fe1">
                        <div class="chat-text">"나는 LEET 120점, GPA 90점, 토익 800점이야. 경북대학교에 합격할 수 있을까?"</div><button
                            class="btn-more" aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="64e39d22-dfc5-421e-b7c1-2a549475b2f3">
                        <div class="chat-text">"나는 LEET 120점, GPA 90점, 토익 800점이야. 경북대학교에 합격할 수 있을까?"</div><button
                            class="btn-more" aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="9f14e192-a59f-44b6-8813-d76ed93eb4e2">
                        <div class="chat-text">"나는 LEET 120점, GPA 90점, 토익 800점이야. 경북대학교에 합격할 수 있을까?"</div><button
                            class="btn-more" aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="9ea4806a-dc9f-437a-bbb6-857456b9913e">
                        <div class="chat-text">"나는 LEET 120점, GPA 90점, 토익 800점이야. 경북대학교에 합격할 수 있을까?"</div><button
                            class="btn-more" aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="dfc88f03-9992-485d-9914-56e3dcebc371">
                        <div class="chat-text">"나는 LEET 120점, GPA 90점, 토익 800점이야. 경북대학교에 합격할 수 있을까?"</div><button
                            class="btn-more" aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="c3e9869e-952b-49ac-8413-29b9896aac80">
                        <div class="chat-text">"건국대학교 최종 합격자의 정성요소는?"</div><button class="btn-more"
                            aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="3bd73187-2358-431f-95d3-bbe5f15c4bf8">
                        <div class="chat-text">"나는 LEET 120점, GPA 90점, 토익 800점이야. 경북대학교에 합격할 수 있을까?"</div><button
                            class="btn-more" aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="2ca807a4-8643-47b0-b095-feed41d21d46">
                        <div class="chat-text">"나는 LEET 120점, GPA 90점, 토익 800점이야. 경북대학교에 합격할 수 있을까?"</div><button
                            class="btn-more" aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="1e2203bb-a29b-4579-b24a-454adb63d0c9">
                        <div class="chat-text">"나는 LEET 120점, GPA 90점, 토익 800점이야. 경북대학교에 합격할 수 있을까?"</div><button
                            class="btn-more" aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="e2cbf9a3-b0af-434b-9b6a-0de9700a56c4">
                        <div class="chat-text">"건국대학교 최종 합격자의 정성요소는?"</div><button class="btn-more"
                            aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="cd0ee67b-76c5-4cb9-8b85-873f093766e1">
                        <div class="chat-text">"2025학년도 강원대학교 최종 합격자의 LEET 평균은?"</div><button class="btn-more"
                            aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="93f34ab5-6d74-4b7e-98d8-29a66be77b82">
                        <div class="chat-text">"나는 LEET 120점, GPA 90점, 토익 800점이야. 경북대학교에 합격할 수 있을까?"</div><button
                            class="btn-more" aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="fda02c31-eea2-48f3-8dc2-0cb5b0e46b98">
                        <div class="chat-text">"나는 LEET 120점, GPA 90점, 토익 800점이야. 경북대학교에 합격할 수 있을까?"</div><button
                            class="btn-more" aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="dcdcc055-6a7b-441c-83bf-03effdd15601">
                        <div class="chat-text">"건국대학교 최종 합격자의 정성요소는?"</div><button class="btn-more"
                            aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="62c9e3d1-bc3e-4e96-92d3-38f64fa859ad">
                        <div class="chat-text">"2025학년도 강원대학교 최종 합격자의 LEET 평균은?"</div><button class="btn-more"
                            aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="2bf0f98d-6d3b-49f4-b3be-ff58cc2ef42c">
                        <div class="chat-text">"2025학년도 강원대학교 최종 합격자의 LEET 평균은?"</div><button class="btn-more"
                            aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="6657087f-59db-41e8-b374-12b1a4836efb">
                        <div class="chat-text">"123"</div><button class="btn-more" aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="f5392067-9320-4607-b40c-359b41f2ddc8">
                        <div class="chat-text">"건국대학교 최종 합격자의 정성요소는?"</div><button class="btn-more"
                            aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="7474180f-3dea-4ecf-b8c5-0f6d0579d46c">
                        <div class="chat-text">"건국대학교 최종 합격자의 정성요소는?"</div><button class="btn-more"
                            aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="055b6dfd-37ba-4d36-ae04-4d2fb0107467">
                        <div class="chat-text">"건국대학교 최종 합격자의 정성요소는?"</div><button class="btn-more"
                            aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="3029aa31-49e7-4872-a1c5-513bdaa2dac5">
                        <div class="chat-text">"건국대학교 최종 합격자의 정성요소는?"</div><button class="btn-more"
                            aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="695ea66d-3ff8-4973-adb6-c2d44e8ce511">
                        <div class="chat-text">"건국대학교 최종 합격자의 정성요소는?"</div><button class="btn-more"
                            aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="48ac7584-781d-4899-a0fb-aac41084d00a">
                        <div class="chat-text">"건국대학교 최종 합격자의 정성요소는?"</div><button class="btn-more"
                            aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="f14b3565-8d5c-41a6-88e4-41bda1afa72a">
                        <div class="chat-text">"건국대학교 최종 합격자의 정성요소는?"</div><button class="btn-more"
                            aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="0d800aa0-5b70-4200-bfd4-a67da83de6b0">
                        <div class="chat-text">"1234"</div><button class="btn-more" aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="93c4ed58-2959-4ffb-ba84-192251ad0f7a">
                        <div class="chat-text">"1234"</div><button class="btn-more" aria-label="더보기"></button>
                    </div>
                    <div class="chat-item" data-ssid="6188a523-56a9-4e43-8f35-13e1d0696a1e">
                        <div class="chat-text">"dfgdfg"</div><button class="btn-more" aria-label="더보기"></button>
                    </div>
                </div>
            </div>
            <div class="chat">
                <button class="btn-chat">
                    <svg xmlns="//www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#222">
                        <path
                            d="m644-428-58-58q9-47-27-88t-93-32l-58-58q17-8 34.5-12t37.5-4q75 0 127.5 52.5T660-500q0 20-4 37.5T644-428Zm128 126-58-56q38-29 67.5-63.5T832-500q-50-101-143.5-160.5T480-720q-29 0-57 4t-55 12l-62-62q41-17 84-25.5t90-8.5q151 0 269 83.5T920-500q-23 59-60.5 109.5T772-302Zm20 246L624-222q-35 11-70.5 16.5T480-200q-151 0-269-83.5T40-500q21-53 53-98.5t73-81.5L56-792l56-56 736 736-56 56ZM222-624q-29 26-53 57t-41 67q50 101 143.5 160.5T480-280q20 0 39-2.5t39-5.5l-36-38q-11 3-21 4.5t-21 1.5q-75 0-127.5-52.5T300-500q0-11 1.5-21t4.5-21l-84-82Zm319 93Zm-151 75Z">
                        </path>
                    </svg>숨김 질문
                </button>
                <p class="chat-list">숨김 처리한 질문 내역이 <br>
                    여기에 표시됩니다
                </p>
            </div>
            <button class="btn-chat hide-chat-btn">
                <svg xmlns="//www.w3.org/2000/svg" width="15" viewBox="0 0 18 21" fill="none">
                    <path
                        d="M8.9 15C9.25 15 9.54583 14.8792 9.7875 14.6375C10.0292 14.3958 10.15 14.1 10.15 13.75C10.15 13.4 10.0292 13.1042 9.7875 12.8625C9.54583 12.6208 9.25 12.5 8.9 12.5C8.55 12.5 8.25417 12.6208 8.0125 12.8625C7.77083 13.1042 7.65 13.4 7.65 13.75C7.65 14.1 7.77083 14.3958 8.0125 14.6375C8.25417 14.8792 8.55 15 8.9 15ZM8 11.15H9.85C9.85 10.8667 9.8625 10.625 9.8875 10.425C9.9125 10.225 9.96667 10.0333 10.05 9.85C10.1333 9.66667 10.2375 9.49583 10.3625 9.3375C10.4875 9.17917 10.6667 8.98333 10.9 8.75C11.4833 8.16667 11.8958 7.67917 12.1375 7.2875C12.3792 6.89583 12.5 6.45 12.5 5.95C12.5 5.06667 12.2 4.35417 11.6 3.8125C11 3.27083 10.1917 3 9.175 3C8.25833 3 7.47917 3.225 6.8375 3.675C6.19583 4.125 5.75 4.75 5.5 5.55L7.15 6.2C7.26667 5.75 7.5 5.3875 7.85 5.1125C8.2 4.8375 8.60833 4.7 9.075 4.7C9.525 4.7 9.9 4.82083 10.2 5.0625C10.5 5.30417 10.65 5.625 10.65 6.025C10.65 6.30833 10.5583 6.60833 10.375 6.925C10.1917 7.24167 9.88333 7.59167 9.45 7.975C9.16667 8.20833 8.9375 8.4375 8.7625 8.6625C8.5875 8.8875 8.44167 9.125 8.325 9.375C8.20833 9.625 8.125 9.8875 8.075 10.1625C8.025 10.4375 8 10.7667 8 11.15ZM9 21L6 18H2C1.45 18 0.979167 17.8042 0.5875 17.4125C0.195833 17.0208 0 16.55 0 16V2C0 1.45 0.195833 0.979167 0.5875 0.5875C0.979167 0.195833 1.45 0 2 0H16C16.55 0 17.0208 0.195833 17.4125 0.5875C17.8042 0.979167 18 1.45 18 2V16C18 16.55 17.8042 17.0208 17.4125 17.4125C17.0208 17.8042 16.55 18 16 18H12L9 21ZM2 16H6.8L9 18.2L11.2 16H16V2H2V16Z">
                    </path>
                </svg>AI 문의
            </button>

            <aside class="creadit-wrap">
                <div class="credit-status">
                    <div class="status-wrap">
                        <div class="status">
                            <span class="status-icon">
                                <img src="//img.megals.co.kr/mega_chat/ico_credit.png" alt="">
                            </span>
                            <span class="status-label">이용권</span>
                            <span class="status-count">10</span>
                        </div>
                        <span class="status-detail">( 일반 8 | 무료 2 | 관리자 지급 2 ) </span>
                    </div>
                    <a href="#" class="btn-buy">구매하기</a>
                    <a href="#" class="btn-logout"></a>
                </div>
                <a href="#" class="mo btn-text-logout">로그아웃</a>
            </aside>
        </div>



        <main class="main">

            <header class="main-header">
                <button class="hamburger-menu" id="hamburgerMenu" aria-label="메뉴열기">
                    <svg xmlns="//www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#222">
                        <path d="M120-120v-80h720v80H120Zm0-320v-80h720v80H120Zm0-320v-80h720v80H120Z"></path>
                    </svg>
                </button>
                <span class="logo">
                    <!--25.07.21-->
                    <img src="//img.megals.co.kr/mega_chat/logo.png" alt="메가로스쿨 AI 디케이">
                </span>
                <button class="btn-chat" data-role="new-chat" aria-label="새 질문하기" onclick="javascript:clearHistory();">
                    <svg xmlns="//www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#222">
                        <path
                            d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h357l-80 80H200v560h560v-278l80-80v358q0 33-23.5 56.5T760-120H200Zm280-360ZM360-360v-170l367-367q12-12 27-18t30-6q16 0 30.5 6t26.5 18l56 57q11 12 17 26.5t6 29.5q0 15-5.5 29.5T897-728L530-360H360Zm481-424-56-56 56 56ZM440-440h56l232-232-28-28-29-28-231 231v57Zm260-260-29-28 29 28 28 28-28-28Z">
                        </path>
                    </svg>
                </button>
            </header>



            <aside class="creadit-wrap">
                <div class="credit-status">
                    <div class="status-wrap">
                        <div class="status">
                            <span class="status-icon">
                                <img src="//img.megals.co.kr/mega_chat/ico_credit.png" alt="">
                            </span>
                            <span class="status-label">이용권</span>
                            <span class="status-count">10</span>
                        </div>
                        <span class="status-detail">( 일반 0 | 서비스권 0 ) </span>
                    </div>
                    <a href="#" class="btn-buy">구매하기</a>
                    <a href="/member/pop/logout_sql.asp" class="btn-logout"></a>
                </div>
                <a href="/member/pop/logout_sql.asp" class="mo btn-text-logout">로그아웃</a>
            </aside>
            <div class="chat-container">
                <div class="contents chat-content">

                    <div class="messages" id="messages">
                        <div class="message user">
                            <div class="message-content">나는 LEET 120점, GPA 90점, 토익 800점이야. 경북대학교에 합격할 수 있을까?</div>
                        </div>
                        <div class="message assistant">
                            <div class="message-content summary">
                                <p>아래는 안내해주신 점수(LEET 120점, GPA 90점, 토익 800점)를 기준으로 경북대학교 로스쿨 “일반전형”의 정량·정성 데이터 및 합격
                                    전략을 표와 함께 전문가 관점에서 제공합니다.</p>
                                <hr>
                                <h3>1. 주요 정량 지표 (경북대학교)</h3>
                                <table>
                                    <thead>
                                        <tr>
                                            <th>항목</th>
                                            <th align="center">1단계합격 평균</th>
                                            <th align="center">하위 10% 평균</th>
                                            <th align="center">추가합격 평균</th>
                                            <th align="center">최초합격 평균</th>
                                            <th align="center">최종합격자 평균</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><strong>LEET(표준점수)</strong></td>
                                            <td align="center">124.6점</td>
                                            <td align="center">116.0점</td>
                                            <td align="center">124.1점</td>
                                            <td align="center">128.2점</td>
                                            <td align="center">126.8점</td>
                                        </tr>
                                        <tr>
                                            <td><strong>GPA(백분위)</strong></td>
                                            <td align="center">96.1점</td>
                                            <td align="center">97.0점</td>
                                            <td align="center">96.6점</td>
                                            <td align="center">95.7점</td>
                                            <td align="center">96.0점</td>
                                        </tr>
                                        <tr>
                                            <td><strong>공인영어(토익)</strong></td>
                                            <td align="center">922.2점</td>
                                            <td align="center">919.6점</td>
                                            <td align="center">934.1점</td>
                                            <td align="center">925.1점</td>
                                            <td align="center">928.3점</td>
                                        </tr>
                                        <tr>
                                            <td><strong>종합점수</strong></td>
                                            <td align="center">233.9점</td>
                                            <td align="center">231.5점</td>
                                            <td align="center">234.0점</td>
                                            <td align="center">235.0점</td>
                                            <td align="center">234.6점</td>
                                        </tr>
                                    </tbody>
                                </table>
                                <hr>
                                <h3>2. 정성요소 분석 (최종합격자 평균)</h3>
                                <table>
                                    <thead>
                                        <tr>
                                            <th>항목</th>
                                            <th align="center">최종합격자 평균</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>봉사활동 총시간</td>
                                            <td align="center">40.8시간</td>
                                        </tr>
                                        <tr>
                                            <td>수상경력 장학금</td>
                                            <td align="center">1.8건</td>
                                        </tr>
                                        <tr>
                                            <td>수상경력 교내외대회</td>
                                            <td align="center">0.5건</td>
                                        </tr>
                                        <tr>
                                            <td>수상경력 기타</td>
                                            <td align="center">0.1건</td>
                                        </tr>
                                        <tr>
                                            <td>기타자격증 소지자</td>
                                            <td align="center">0.5건</td>
                                        </tr>
                                        <tr>
                                            <td>대학원논문</td>
                                            <td align="center">0.0편</td>
                                        </tr>
                                    </tbody>
                                </table>
                                <hr>
                                <h3>3. 본인 점수 대비 경쟁력 분석</h3>
                                <ul>
                                    <li><strong>본인 LEET(120점)</strong> vs 최종합격자 평균(126.8점) vs 1단계합격 하위 10%
                                        평균(116.0점)<ul>
                                            <li>하위 10% 보다는 <strong>위</strong>이나, 최종합격자보다는 상당히 <strong>하위</strong>
                                            </li>
                                        </ul>
                                    </li>
                                    <li><strong>본인 GPA(90점)</strong> vs 최종합격자 평균(96.0점) vs 하위 10%(97.0점)<ul>
                                            <li><strong>평균 대비 낮음</strong>. GPA가 전체적으로 높은 집단임</li>
                                        </ul>
                                    </li>
                                    <li><strong>본인 토익(800점)</strong> vs 최종합격자 평균(928.3점) vs 하위 10%(919.6점)<ul>
                                            <li>영어점수도 <strong>평균 대비 크게 낮음</strong>, 최하위권보다도 낮은 편</li>
                                        </ul>
                                    </li>
                                </ul>
                                <hr>
                                <h3>4. 합격 가능성 및 준비 전략</h3>
                                <ul>
                                    <li>LEET 점수는 1단계 하위 10%~평균 사이, GPA와 영어 점수는 <strong>모두 하위 10% 이하</strong>임.</li>
                                    <li>현재 경쟁 구도에서는 <strong>정량 지표의 전면적 보강이 반드시 필요합니다</strong>. </li>
                                    <li><strong>1단계 통과 가능성은 약간 있으나, 최종합격권 진입은 매우 어려운 수치 구조</strong>입니다. </li>
                                    <li>지원시, 추가정성요소(강한 활동, 자격증, 수상 등 포함) 및 학습계획, 자기소개서에서의 차별화도 필수적입니다.</li>
                                </ul>
                                <hr>
                                <h3>5. 실용적 조언</h3>
                                <ul>
                                    <li>본인의 LEET 점수를 <strong>126점 이상</strong>, GPA는 <strong>최소 95점 이상</strong>, 토익은
                                        <strong>900점 이상</strong> 확보해야 안정적 지원이 가능합니다.
                                    </li>
                                    <li>부족한 항목이 많으므로, <strong>2025학년도 지원까지 남은 기간 동안 점수 상승 전략</strong>(LEET, 학점, 영어
                                        동시 보완)이 필요합니다.</li>
                                    <li>추가로 <strong>경북대가 선호하는 정성요소(봉사, 수상, 자격증 등)의 강화</strong>도 병행하세요.</li>
                                </ul>
                                <hr>
                                <h3>6. 요약</h3>
                                <ul>
                                    <li>정량지표 전반(특히 GPA, 영어 점수)이 <strong>합격자군 대비 상당히 미미</strong>합니다.</li>
                                    <li>“현재 점수에서는 합격 가능성은 <strong>매우 낮으며</strong>, 전면적·단기적 보완이 필요”합니다.</li>
                                    <li>구체적 목표치(LEET 126+, GPA 95+, 영어 900+)를 설정하고 준비 방향을 조정하실 것을 권고합니다.</li>
                                </ul>
                                <p>추가로 궁금한 내용이 있으면 언제든 문의해 주세요.</p>
                                <!--25.07.21-->
                                <ul class="input-info">
                                    <li><span>메가로스쿨 AI 디케이는 AI 서비스 특성상 답변이 불가능하거나,</span> <span>데이터에 오류가 발생하는 경우가 있을 수
                                            있습니다.</span></li>
                                    <li>합격자 데이터의 경우 실제 입시 결과와는 차이가 있을 수 있으니 참고용으로 활용하시기 바랍니다. <a href="pop.html"
                                            class="btn-text-line"
                                            onclick="window.open( this.href , '_blank' , ' width=750 , height=800, top=50 , left=50 , scrollbars=yes, toolbar=no, menubar=no, resizable=no, copyhistory=no' ); return false">이용안내
                                            전문보기
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="message user">
                            <div class="message-content">이건 새로운 질문</div>
                        </div>
                        <div class="message message assistant" style="display: block;">
                            <div class="message-content summary">
                                <p>네, 새로운 질문이 있으시면 언제든 남겨주세요. 질문의 내용을 입력해주시면 안내 기준(Format 1~4)에 맞춰 신속하고 정확하게
                                    답변드리겠습니다.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="input-container ">
                <a href="pop.html" class="mo btn-text-line"
                    onclick="window.open( this.href , '_blank' , ' width=750 , height=800, top=50 , left=50 , scrollbars=yes, toolbar=no, menubar=no, resizable=no, copyhistory=no' ); return false">이용안내
                    전문보기
                </a>
                <div class="message-wrap">
                    <button class="btn-scroll none" data-role="scroll-page" aria-label="하단으로">
                        <img src="http://img.megals.co.kr/mega_chat/btn_arrow.png" alt="">
                    </button>
                    <textarea name="" class="message-input" id="messageInput"></textarea>
                    <button class="send-btn" id="sendBtn" type="button" disabled="">
                    </button>
                    <div class="custom-placeholder">
                        <strong class="highlight">질문 TIP</strong> LEET 점수, GPA 점수, 토익 점수를 함께 입력하면 보다 정확한 정보를 확인할 수
                        있어요!
                    </div>
                </div>
                <div class="info-wrap">
                    <a href="#" class="m_close">
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 10 10" fill="#222">
                            <path
                                d="M9.24264 0.757411L5 5.00005M5 5.00005L0.757359 9.24269M5 5.00005L0.757359 0.757411M5 5.00005L9.24264 9.24269"
                                stroke="#111111" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                    </a>
                    <!--25.07.21-->
                    <ul class="input-info">
                        <li><span>메가로스쿨 AI 디케이는 AI 서비스 특성상 답변이 불가능하거나,</span> <span>데이터에 오류가 발생하는 경우가 있을 수
                                있습니다.</span>
                        </li>
                        <li>합격자 데이터의 경우 실제 입시 결과와는 차이가 있을 수 있으니 참고용으로 활용하시기 바랍니다. <a href="pop.html"
                                class="btn-text-line"
                                onclick="window.open( this.href , '_blank' , ' width=750 , height=800, top=50 , left=50 , scrollbars=yes, toolbar=no, menubar=no, resizable=no, copyhistory=no' ); return false">이용안내
                                전문보기
                            </a>
                        </li>
                    </ul>
                </div>
            </div>

        </main>

        <div class="dimmed"></div>

    </div>







    <script>
        //session_id가 있으면
        const sessionId = "8c12a439-94d3-4fc6-8cf4-d7f44f6d2282";

        let skip = 0;
        const limit = 40;
        let isLoading = false;
        let isEnd = false;

        const sidebar = document.getElementById('sidebar');
        const intro = document.getElementById('intro');

        const messagesArea = document.getElementById('messages');
        /*
        일부 기능 및 변수 선언 - /ai/common/js/ui.js 존재(중요)
        - sendQuestion() 실행
        */

        //왼쪽 사이드바 목록 가져오기
        function loadChatList() {

            if (isLoading || isEnd) return;
            isLoading = true;

            //fetch(`//chat.megals.co.kr/chat/list?skip=${skip}&limit=${limit}`)
            fetch(`//chat.megals.co.kr/chat/list`, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ skip: skip, limit: 40, user_id: "dlehdwls0" })
            })
                .then(async response => {

                    // 아이디 정보가 없으면 로그인 페이지로 리다이렉트
                    if (response.status === 401) {
                        // const data = await response.json();
                        // if (data.redirect) window.location.href = data.redirect;

                        // .json()은 비동기이므로 .then()으로 처리해야 합니다.
                        response.json().then(data => {
                            if (data.redirect) window.location.href = data.redirect;
                        });
                        throw new Error('Unauthorized'); // catch 블록으로 에러를 전달합니다.

                    }
                    if (!response.ok) {
                        throw new Error(`HTTP 오류: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    if (data.length == 0) {
                        isEnd = true;
                        return;
                    }

                    data.forEach(item => {

                        const div = document.createElement('div');

                        if (sessionId == item.CH_SESSION_ID) {
                            div.className = 'chat-item active';
                        } else {
                            div.className = 'chat-item';
                        }
                        div.innerHTML = '<div class="chat-text">' + item.REQUEST_PARAMS + '</div><button class="btn-more" aria-label="더보기"></button>';
                        div.dataset.ssid = item.CH_SESSION_ID;

                        div.querySelector('.chat-text').addEventListener('click', () => {
                            document.querySelectorAll('.chat-item').forEach(el => el.classList.remove('active'));
                            div.classList.add('active');

                            const newUrl = `/ai/ai_chat.asp?sessionId=${item.CH_SESSION_ID}`;
                            window.history.pushState({ path: newUrl }, '', newUrl);
                            localStorage.setItem("session_id", item.CH_SESSION_ID);

                            // 모든 .message.assistant 요소를 NodeList로 가져오기
                            const elements = document.querySelectorAll('.message.assistant');
                            // 각각의 요소를 부모에서 제거
                            elements.forEach(el => el.remove());

                            loadChatDetail(item.CH_SESSION_ID);
                        });

                        sidebar.appendChild(div);

                    });

                    makeTooltipeDiv();

                    skip += limit;
                })
                .catch(error => {
                    console.error('데이터 불러오기 실패:', error);
                })
                .finally(() => {
                    isLoading = false;
                });
        }

        function loadChatDetail(session_id) {
            intro.remove();
            messagesArea.innerHTML = '';

            //fetch(`//chat.megals.co.kr/chat/detail/${session_id}`)
            fetch(`//chat.megals.co.kr/chat/detail`, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ session_id: session_id, user_id: "dlehdwls0" })
            })
                .then(response => {
                    // 아이디 정보가 없으면 로그인 페이지로 리다이렉트
                    if (response.status === 401) {
                        // const data = response.json();
                        // if (data.redirect) window.location.href = data.redirect;

                        // .json()은 비동기이므로 .then()으로 처리해야 합니다.
                        response.json().then(data => {
                            if (data.redirect) window.location.href = data.redirect;
                        });
                        throw new Error('Unauthorized'); // catch 블록으로 에러를 전달합니다.
                    }
                    if (!response.ok) {
                        throw new Error(`HTTP 오류: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    if (data.length === 0) {
                        isEnd = true;
                        return;
                    }

                    let text = '';
                    let body = '';
                    let question = '';
                    let answer = '';
                    let htmlTxt = '';
                    data.forEach(item => {
                        if (question != item.AL_REQUEST_PARAMS) {
                            question = item.AL_REQUEST_PARAMS.replace(/"/g, '');
                        }
                        //질문 태그
                        makeUserDiv(question);

                        htmlTxt = '';
                        text = item.AL_RESPONSE_BODY.replace(/"/g, ''); // <br> 태그를 줄바꿈으로 변환
                        body = text.split('\\n\\n');
                        body.forEach((line, index) => {
                            //if (line.trim() == '') return; // 빈 줄은 건너뜀
                            answer += marked.parse(line.replace(/\\n/g, '\n')); // 줄바꿈 처리
                            if (index == body.length - 1) {
                                // 마지막 줄일 경우
                                htmlTxt += processMessageContent(answer);

                                answer = '';
                            }
                        });
                        //답변 태그
                        makeResponseDiv(htmlTxt);

                    });

                    requestAnimationFrame(() => {
                        messagesArea.scrollTop = messagesArea.scrollHeight;
                    });

                })
                .catch(error => {
                    console.error('데이터 불러오기 실패:', error);
                    htmlTxt = `<div style="color: red; padding: 10px; background-color: #ffeeee; border-radius: 5px; margin: 10px 0;">오류 발생: ${escapeHtml(event.data)}</div>`;
                    updateAssistantMessage(assistantMessage);
                })
                .finally(() => {

                });
        }

        //답변처리
        //전역 변수로 선언
        let assistantMessage = '';
        let assistantMessageElement = null;
        let isStreaming = false;
        let currentThreadId = null;

        function clearHistory() {
            // 로컬 스토리지에서 세션 아이디 삭제
            localStorage.removeItem("session_id");
            alert("새 질문이 생성되었습니다.");
            location.replace("/ai/ai_chat.asp");  // 페이지 새로고침
        }

        let isWaiting = false;
        let waitingTimeout = null;

        function showWaitingMsg() {
            if (!isWaiting) {
                makeLoadingDiv();
                scrollToBottom();
                isWaiting = true;
            }
        }

        function hideWaitingMsg() {
            if (isWaiting) {
                const waitMsg = document.getElementById('loading-message');
                if (waitMsg) waitMsg.remove();
                isWaiting = false;
            }
        }

        async function sendQuestion() {

            intro.remove();

            messageInput.disabled = true;
            sendBtn.disabled = true;

            const question = messageInput.value.trim();

            if (!question) return;

            messageInput.value = "";

            //분석 중 표시
            makeLoadingDiv();

            let session_id = localStorage.getItem("session_id") || "";

            // 스트리밍 시작
            isStreaming = true;
            assistantMessage = '';
            assistantMessageElement = createMessageElement('', 'message assistant');
            document.getElementById('messages').appendChild(assistantMessageElement);
            assistantMessageElement.style.display = "none";

            try {
                const response = await fetch("//chat.megals.co.kr/assistant_stream", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        question: question,
                        session_id: session_id,
                        user_id: "dlehdwls0"
                    })
                });

                if (!response.ok) {
                    throw new Error('서버 오류');
                }
                // 스트리밍 응답 처리
                const reader = response.body.getReader();
                const decoder = new TextDecoder();
                let buffer = '';

                while (true) {
                    const { value, done } = await reader.read();
                    if (done) break;

                    buffer += decoder.decode(value, { stream: true });

                    // 이벤트 분리하여 처리
                    const events = buffer.split('\n\n');
                    buffer = events.pop() || '';

                    for (const event of events) {
                        if (event.trim()) {
                            try {
                                const parsedEvent = JSON.parse(event);

                                // 3. 정상 메시지면 waiting 해제
                                hideWaitingMsg();
                                handleEvent(parsedEvent);

                                clearTimeout(waitingTimeout);
                                waitingTimeout = setTimeout(showWaitingMsg, 1500);

                            } catch (err) {
                                console.error('Event parsing error:', err, event);
                            }
                        }
                    }
                }

                hideWaitingMsg();
                clearTimeout(waitingTimeout);

                messageInput.disabled = false;
                sendBtn.disabled = false;

                skip = 0;
                let ssid = '';
                document.querySelectorAll('.chat-item').forEach(item => item.remove());

                // 2. MutationObserver로 새로 생성된 chat-item 감시
                const observer = new MutationObserver((mutations, obs) => {
                    const firstItem = document.querySelector('.chat-item');
                    if (firstItem) {
                        ssid = firstItem.dataset.ssid; // 첫 번째 아이템의 data-ssid 값 가져오기
                        window.history.pushState({}, '', '/ai/ai_chat.asp?sessionId=' + ssid);
                        console.log('생성된 data-ssid:', firstItem.dataset.ssid);
                        obs.disconnect(); // 감시 종료
                    }
                });

                // sidebar에 변화가 생기는지 감시 시작
                observer.observe(document.getElementById('sidebar'), {
                    childList: true,
                    subtree: false
                });

                // 3. 비동기 로드 함수 호출
                loadChatList();

            }
            catch (error) {
                console.error('Error:', error);
                isStreaming = false;
                updateAssistantMessage('오류가 발생했습니다. 다시 시도해주세요.');
            } finally {
                // 로딩 모달 숨김
            }
        }

        function handleEvent(event) {

            switch (event.type) {
                case 'session_id':
                    localStorage.setItem("session_id", event.data);
                    break;

                case 'text_created':
                    // 메시지 시작 이벤트
                    const loadingMsg = document.getElementById('loading-message');
                    if (loadingMsg) loadingMsg.remove();
                    break;

                case 'text_delta':
                    // 텍스트 추가
                    assistantMessage += event.data;
                    updateAssistantMessage(assistantMessage);
                    break;

                case 'done':
                    // 스트리밍 완료
                    break;

                case 'error':
                    // 오류 발생
                    assistantMessage += `<div style="color: red; padding: 10px; background-color: #ffeeee; border-radius: 5px; margin: 10px 0;">오류 발생: ${escapeHtml(event.data)}</div>`;
                    updateAssistantMessage(assistantMessage);
                    console.error('Server error:', event.data);
                    break;

                default:
                    console.log('Unknown event type:', event.type);
            }
        }


        function createMessageElement(text, role) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${role}`;
            messageDiv.innerHTML = marked.parse(text);
            return messageDiv;
        }

        function updateAssistantMessage(text) {

            if (assistantMessageElement) {
                if (assistantMessageElement.style.display == 'none') {
                    assistantMessageElement.style.display = 'block';
                }
                // 마크다운 처리 등을 추가할 수 있음
                assistantMessageElement.innerHTML = processMessageContent(text);
                scrollToBottomSmooth();
            }
        }

        function processMessageContent(text) {
            text = `<div class="message-content summary">${marked.parse(text)}</div>`;
            return text;
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function scrollToBottomSmooth() {
            // ? requestAnimationFrame으로 스크롤을 부드럽게 처리
            requestAnimationFrame(() => {
                messagesArea.scrollTo({
                    top: messagesArea.scrollHeight,
                    behavior: "smooth"
                });
            });
        }

        //질문 태그
        function makeUserDiv(userTxt) {
            const userMessage = document.createElement('div');
            userMessage.className = 'message user';
            userMessage.innerHTML = `<div class="message-content">${userTxt}</div>`;
            document.getElementById('messages').appendChild(userMessage);
        }

        //응답 태그
        function makeResponseDiv(responseTxt) {
            const responseMessage = document.createElement('div');
            responseMessage.className = 'message assistant';
            responseMessage.innerHTML = `${responseTxt}`;
            document.getElementById('messages').appendChild(responseMessage);
        }

        //분석중 태그
        function makeLoadingDiv() {
            const loadingMessage = document.createElement('div');
            loadingMessage.className = 'message assistant';
            loadingMessage.id = 'loading-message';
            loadingMessage.innerHTML = `<div class="message-content loading">데이터를 분석 중입니다<span class="dots"></span></div>`;
            document.getElementById('messages').appendChild(loadingMessage);
        }

        //툴팁 태그
        function makeTooltipeDiv() {
            //말풍선
            const chatItems = document.querySelectorAll('.chat-item');
            chatItems.forEach(el => {
                el.addEventListener('mouseenter', function () {
                    document.querySelector('.tooltip-layer')?.remove();
                    const tooltip = document.createElement('div');
                    tooltip.className = 'tooltip-layer';
                    tooltip.textContent = el.textContent;
                    document.body.appendChild(tooltip);
                    el._tooltip = tooltip;
                    const rect = el.getBoundingClientRect();
                    tooltip.style.position = 'absolute';
                    tooltip.style.top = `${rect.bottom + window.scrollY}px`;
                    tooltip.style.left = `${rect.left + window.scrollX + 180}px`;
                });
                el.addEventListener('mouseleave', function () {
                    el._tooltip?.remove();
                    delete el._tooltip;
                });
            });

            //도구
            /** NAV 옵션 레이어  **/
            const popup = document.querySelector('.options');
            const chat = document.querySelector('.chat');
            if (chat) {
                const chatButtons = document.querySelectorAll('.chat .btn-chat');
                chatButtons.forEach((btn) => {
                    btn.addEventListener('click', () => {
                        const clickedChat = btn.closest('.chat');
                        document.querySelectorAll('.chat').forEach((chat) => {
                            chat.classList.remove('active');
                            chat.querySelector('.btn-chat')?.classList.remove('active');
                        });
                        clickedChat.classList.add('active');
                    });
                });
            }
            if (chat && popup) {
                let currentButton = null;

                function closePopup() {
                    popup.classList.remove('show', 'mobile');
                    dimmed.classList.remove('show');
                    currentButton = null;
                }


                const dimmed = document.querySelector('.dimmed');
                document.querySelectorAll('.btn-more').forEach(button => {
                    button.addEventListener('click', e => {
                        e.stopPropagation();
                        const isMobile = window.innerWidth <= 768;

                        const isSameButton = currentButton === button;
                        const isPopupVisible = popup.classList.contains('show');

                        if (isSameButton && isPopupVisible) {
                            closePopup();
                            return;
                        }
                        if (isMobile) {
                            // 모바일: 위치 계산 안 하고 클래스로 처리
                            popup.classList.add('show');
                            dimmed.classList.add('show');
                        } else {
                            // PC: 기존 방식대로 위치 계산
                            const rect = button.getBoundingClientRect();
                            popup.style.top = `${rect.top - 13}px`;
                            popup.style.left = `${rect.left + 30}px`;
                            popup.classList.add('show');
                            dimmed.classList.add('show');
                        }

                        currentButton = button;
                    });
                });

                popup.querySelectorAll('li').forEach(item => {
                    item.addEventListener('click', closePopup);
                });
                const closeBtn = document.querySelector('.m-btn-close');
                if (closeBtn) {
                    closeBtn.addEventListener('click', (e) => {
                        e.preventDefault();
                        if (window.innerWidth <= 768) {
                            closePopup();
                        }
                    });
                }
                document.addEventListener('keydown', e => {
                    if (e.key === 'Escape') {
                        closePopup();
                    }
                });

                document.addEventListener('click', e => {
                    if (!popup.contains(e.target) && !e.target.classList.contains('btn-more')) {
                        closePopup();
                    }
                });
            }

        }

        // 초기 로딩
        loadChatList();

        if (sessionId) {
            localStorage.setItem("session_id", sessionId);
            intro.remove();
            loadChatDetail(sessionId);
        } else {
            localStorage.removeItem("session_id");
        }

        // 스크롤 이벤트 등록
        sidebar.addEventListener('scroll', () => {
            if (sidebar.scrollTop + sidebar.clientHeight >= sidebar.scrollHeight - 10) {
                loadChatList(); // 하단에 도달하면 추가 데이터 요청
            }
        });


    </script>

</body>

</html>